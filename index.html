<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub èµ„æºåŠ é€Ÿå·¥å…·</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Arial", "Microsoft YaHei", sans-serif; }
        body { max-width: 800px; margin: 0 auto; padding: 20px; background: #f0f2f5; }
        .container { background: #fff; padding: 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .header { text-align: center; margin-bottom: 25px; }
        h1 { color: #24292e; margin-bottom: 10px; font-size: 28px; }
        .desc { color: #586069; margin-bottom: 25px; line-height: 1.6; font-size: 16px; }
        .input-group { display: flex; gap: 10px; margin-bottom: 20px; }
        #githubUrl { flex: 1; padding: 14px 16px; border: 1px solid #ddd; border-radius: 6px; font-size: 16px; outline: none; transition: all 0.3s; }
        #githubUrl:focus { border-color: #0366d6; box-shadow: 0 0 0 3px rgba(3,102,214,0.2); }
        #accelerateBtn { padding: 14px 28px; background: #0366d6; color: #fff; border: none; border-radius: 6px; font-size: 16px; cursor: pointer; transition: all 0.3s; font-weight: 500; }
        #accelerateBtn:hover { background: #0256b3; transform: translateY(-1px); }
        #accelerateBtn:active { transform: translateY(0); }
        .supported { margin-top: 30px; }
        h3 { color: #24292e; margin: 18px 0 10px; font-size: 18px; }
        ul { color: #586069; padding-left: 22px; line-height: 1.7; }
        ul li { margin-bottom: 8px; }
        .result { margin-top: 20px; padding: 18px; border-radius: 6px; display: none; }
        .success { background: #f0fff4; border: 1px solid #c6f6d5; }
        .error { background: #fff5f5; border: 1px solid #fed7d7; }
        #resultText { color: #24292e; line-height: 1.6; font-size: 16px; }
        #copyBtn { margin-top: 12px; padding: 10px 18px; background: #f6f8fa; color: #0366d6; border: 1px solid #d1d9e0; border-radius: 6px; cursor: pointer; font-size: 14px; transition: all 0.2s; }
        #copyBtn:hover { background: #e4eaf0; }
        .loading { display: inline-block; width: 18px; height: 18px; border: 2px solid rgba(255,255,255,.3); border-radius: 50%; border-top-color: #fff; animation: spin 1s ease-in-out infinite; margin-right: 8px; vertical-align: middle; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .proxy-info { background: #f6f8fa; padding: 15px; border-radius: 6px; margin-top: 20px; border-left: 4px solid #0366d6; }
        .proxy-info p { margin: 5px 0; color: #586069; }
        .examples { margin-top: 25px; }
        .example-list { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px; }
        .example-card { background: #f6f8fa; padding: 12px; border-radius: 6px; font-size: 14px; cursor: pointer; transition: all 0.2s; border: 1px solid #e1e4e8; }
        .example-card:hover { background: #e1e4e8; }
        footer { text-align: center; margin-top: 30px; color: #6a737d; font-size: 14px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>GitHub èµ„æºåŠ é€Ÿå·¥å…·</h1>
            <p class="desc">
                è¾“å…¥ GitHub ç›¸å…³é“¾æ¥ï¼Œä¸€é”®ç”Ÿæˆä»£ç†é“¾æ¥ï¼Œè§£å†³å›½å†…è®¿é—®ç¼“æ…¢é—®é¢˜ã€‚ä½¿ç”¨è‡ªå®šä¹‰ä»£ç†æœåŠ¡ï¼š<strong>www.gyj07.dpdns.org</strong>
            </p>
        </div>

        <!-- è¾“å…¥å’ŒæŒ‰é’®åŒºåŸŸ -->
        <div class="input-group">
            <input 
                type="text" 
                id="githubUrl" 
                placeholder="ç¤ºä¾‹ï¼šhttps://github.com/ç”¨æˆ·å/ä»“åº“å/releases æˆ– https://raw.githubusercontent.com/..."
            >
            <button id="accelerateBtn">
                <span id="btnLoading" class="loading" style="display: none;"></span>
                <span id="btnText">ç”ŸæˆåŠ é€Ÿé“¾æ¥</span>
            </button>
        </div>

        <!-- ç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
        <div class="result" id="resultBox">
            <p id="resultText"></p>
            <button id="copyBtn">å¤åˆ¶åŠ é€Ÿé“¾æ¥</button>
        </div>

        <!-- ç¤ºä¾‹é“¾æ¥ -->
        <div class="examples">
            <h3>ğŸš€ å¿«é€Ÿç¤ºä¾‹ï¼ˆç‚¹å‡»è¯•è¯•ï¼‰</h3>
            <div class="example-list">
                <div class="example-card" data-url="https://github.com/rustdesk/rustdesk/releases/latest">RustDesk Releases</div>
                <div class="example-card" data-url="https://raw.githubusercontent.com/octocat/Hello-World/master/README">Raw æ–‡ä»¶ç¤ºä¾‹</div>
                <div class="example-card" data-url="https://github.com/torvalds/linux/blob/master/README">Linux æºç é¡µé¢</div>
                <div class="example-card" data-url="https://github.com/nodejs/node/tags">Node.js Tags</div>
            </div>
        </div>

        <!-- æ”¯æŒçš„é“¾æ¥ç±»å‹è¯´æ˜ -->
        <div class="supported">
            <h3>âœ… æ”¯æŒåŠ é€Ÿçš„é“¾æ¥ç±»å‹</h3>
            <ul>
                <li>GitHub Releases ä¸‹è½½ï¼šhttps://github.com/ç”¨æˆ·å/ä»“åº“å/releases</li>
                <li>Blob æºç é¡µé¢ï¼šhttps://github.com/ç”¨æˆ·å/ä»“åº“å/blob/åˆ†æ”¯/æ–‡ä»¶è·¯å¾„</li>
                <li>Raw åŸå§‹æ–‡ä»¶ï¼šhttps://raw.githubusercontent.com/ç”¨æˆ·å/ä»“åº“å/åˆ†æ”¯/æ–‡ä»¶è·¯å¾„</li>
                <li>Gist ä»£ç ç‰‡æ®µï¼šhttps://gist.github.com/ç”¨æˆ·å/ID æˆ– https://gist.githubusercontent.com/...</li>
                <li>ä»“åº“ Tags é¡µé¢ï¼šhttps://github.com/ç”¨æˆ·å/ä»“åº“å/tags</li>
                <li>ä»“åº“å‹ç¼©åŒ…ä¸‹è½½ï¼šhttps://github.com/ç”¨æˆ·å/ä»“åº“å/archive/åˆ†æ”¯.zip</li>
            </ul>

            <div class="proxy-info">
                <p><strong>ä»£ç†æœåŠ¡ä¿¡æ¯</strong></p>
                <p>å½“å‰ä½¿ç”¨ä»£ç†ï¼š<code>www.gyj07.dpdns.org</code></p>
                <p>ä»£ç†ç±»å‹ï¼šGitHub èµ„æºåŠ é€Ÿä»£ç†</p>
            </div>

            <h3>âš ï¸ ä½¿ç”¨è¯´æ˜</h3>
            <ul>
                <li>ç”Ÿæˆçš„åŠ é€Ÿé“¾æ¥å¯ç›´æ¥å¤åˆ¶åˆ°æµè§ˆå™¨åœ°å€æ è®¿é—®ï¼Œæˆ–ç”¨äºä¸‹è½½å·¥å…·ï¼ˆå¦‚ wgetã€curlï¼‰</li>
                <li>è‹¥é“¾æ¥æ— æ³•è®¿é—®ï¼Œå¯æ£€æŸ¥åŸé“¾æ¥æ˜¯å¦æœ‰æ•ˆï¼ˆé GitHub é“¾æ¥ä¸æ”¯æŒåŠ é€Ÿï¼‰</li>
                <li>æœ¬å·¥å…·ä»…æä¾›é“¾æ¥è½¬æ¢æœåŠ¡ï¼Œä¸å­˜å‚¨ä»»ä½•ç”¨æˆ·æ•°æ®</li>
            </ul>
        </div>

        <footer>
            <p>GitHub èµ„æºåŠ é€Ÿå·¥å…· &copy; 2023 | ä½¿ç”¨ä»£ç†æœåŠ¡: www.gyj07.dpdns.org</p>
        </footer>
    </div>

    <script>
        // é…ç½®
        const PROXY_PREFIX = 'https://www.gyj07.dpdns.org/'; // ä½¿ç”¨æŒ‡å®šçš„ä»£ç†åŸŸå
        const Config = { jsdelivr: 0 }; // 0=å…³é—­jsDelivré•œåƒï¼Œ1=å¼€å¯

        // DOM å…ƒç´ 
        const githubUrlInput = document.getElementById('githubUrl');
        const accelerateBtn = document.getElementById('accelerateBtn');
        const btnText = document.getElementById('btnText');
        const btnLoading = document.getElementById('btnLoading');
        const resultBox = document.getElementById('resultBox');
        const resultText = document.getElementById('resultText');
        const copyBtn = document.getElementById('copyBtn');
        const exampleCards = document.querySelectorAll('.example-card');

        // æ£€æŸ¥é“¾æ¥æ˜¯å¦ç¬¦åˆ GitHub æ”¯æŒç±»å‹
        function checkGithubUrl(url) {
            const exps = [
                /^(?:https?:\/\/)?github\.com\/.+?\/.+?\/(?:releases|archive)\/.*$/i,
                /^(?:https?:\/\/)?github\.com\/.+?\/.+?\/(?:blob|raw)\/.*$/i,
                /^(?:https?:\/\/)?github\.com\/.+?\/.+?\/(?:info|git-).*$/i,
                /^(?:https?:\/\/)?raw\.(?:githubusercontent|github)\.com\/.+?\/.+?\/.+?\/.+$/i,
                /^(?:https?:\/\/)?gist\.(?:githubusercontent|github)\.com\/.+?\/.+?\/.+$/i,
                /^(?:https?:\/\/)?github\.com\/.+?\/.+?\/tags.*$/i,
                /^(?:https?:\/\/)?github\.com\/.+?\/.+?\/archive\/.*$/i
            ];
            return exps.some(exp => exp.test(url));
        }

        // ç”ŸæˆåŠ é€Ÿé“¾æ¥ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰
        function generateProxyUrl(originalUrl) {
            let url = originalUrl.trim();
            
            // ç¡®ä¿URLæœ‰åè®®å¤´
            if (!url.startsWith('http')) {
                url = 'https://' + url;
            }
            
            // å¤„ç† Blob é“¾æ¥ï¼ˆæ ¹æ® jsdelivr é…ç½®ï¼‰
            if (url.match(/^(?:https?:\/\/)?github\.com\/.+?\/.+?\/blob\/.*$/i)) {
                if (Config.jsdelivr) {
                    // èµ° jsDelivr é•œåƒ
                    return url.replace('/blob/', '@').replace(/^(?:https?:\/\/)?github\.com/, 'https://cdn.jsdelivr.net/gh');
                } else {
                    // è½¬ Raw é“¾æ¥åèµ°ä»£ç†
                    url = url.replace('/blob/', '/raw/');
                }
            }
            
            // å¤„ç†GiståŸå§‹æ–‡ä»¶é“¾æ¥
            if (url.includes('gist.githubusercontent.com')) {
                return PROXY_PREFIX + url;
            }
            
            // å…¶ä»–ç±»å‹é“¾æ¥ç›´æ¥æ‹¼æ¥ä»£ç†å‰ç¼€
            return PROXY_PREFIX + url;
        }

        // æ˜¾ç¤ºç»“æœï¼ˆæˆåŠŸ/é”™è¯¯ï¼‰
        function showResult(text, type) {
            resultText.innerHTML = text;
            resultBox.className = `result ${type}`;
            resultBox.style.display = 'block';
            
            // è‡ªåŠ¨æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
            resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // è®¾ç½®æŒ‰é’®åŠ è½½çŠ¶æ€
        function setLoadingState(isLoading) {
            if (isLoading) {
                accelerateBtn.disabled = true;
                btnText.textContent = 'å¤„ç†ä¸­...';
                btnLoading.style.display = 'inline-block';
            } else {
                accelerateBtn.disabled = false;
                btnText.textContent = 'ç”ŸæˆåŠ é€Ÿé“¾æ¥';
                btnLoading.style.display = 'none';
            }
        }

        // å¤„ç†åŠ é€ŸåŠŸèƒ½
        function accelerateUrl() {
            const originalUrl = githubUrlInput.value.trim();
            
            // éªŒè¯è¾“å…¥
            if (!originalUrl) {
                showResult('è¯·è¾“å…¥ GitHub ç›¸å…³é“¾æ¥', 'error');
                return;
            }
            
            if (!checkGithubUrl(originalUrl)) {
                showResult('ä¸æ”¯æŒçš„é“¾æ¥ç±»å‹ï¼è¯·è¾“å…¥ GitHub Releases/Blob/Raw/Gist é“¾æ¥', 'error');
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            setLoadingState(true);
            
            // ä½¿ç”¨setTimeoutæ¨¡æ‹Ÿå¼‚æ­¥å¤„ç†
            setTimeout(() => {
                // ç”Ÿæˆå¹¶æ˜¾ç¤ºåŠ é€Ÿé“¾æ¥
                const proxyUrl = generateProxyUrl(originalUrl);
                showResult(`åŠ é€Ÿé“¾æ¥å·²ç”Ÿæˆï¼š<br><br><a href="${proxyUrl}" target="_blank" style="word-break: break-all; color: #0366d6; text-decoration: none;">${proxyUrl}</a><br><br>ç‚¹å‡»é“¾æ¥æµ‹è¯•æˆ–å¤åˆ¶åˆ°ä¸‹è½½å·¥å…·ä¸­ä½¿ç”¨`, 'success');
                
                // å­˜å‚¨é“¾æ¥ç”¨äºå¤åˆ¶
                copyBtn.dataset.url = proxyUrl;
                
                // ç§»é™¤åŠ è½½çŠ¶æ€
                setLoadingState(false);
            }, 500);
        }

        // åŠ é€ŸæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        accelerateBtn.addEventListener('click', accelerateUrl);

        // å¤åˆ¶æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        copyBtn.addEventListener('click', () => {
            const proxyUrl = copyBtn.dataset.url;
            if (proxyUrl) {
                // åˆ›å»ºä¸€ä¸ªä¸´æ—¶textareaå…ƒç´ æ¥å¤åˆ¶æ–‡æœ¬
                const textarea = document.createElement('textarea');
                textarea.value = proxyUrl;
                document.body.appendChild(textarea);
                textarea.select();
                
                try {
                    const successful = document.execCommand('copy');
                    const msg = successful ? 'æˆåŠŸå¤åˆ¶åˆ°å‰ªè´´æ¿ï¼' : 'å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥';
                    alert(msg);
                } catch (err) {
                    alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥');
                }
                
                document.body.removeChild(textarea);
            }
        });

        // ç¤ºä¾‹å¡ç‰‡ç‚¹å‡»äº‹ä»¶
        exampleCards.forEach(card => {
            card.addEventListener('click', () => {
                githubUrlInput.value = card.dataset.url;
                accelerateUrl();
            });
        });

        // å›è½¦é”®è§¦å‘åŠ é€Ÿ
        githubUrlInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                accelerateUrl();
            }
        });

        // é¡µé¢åŠ è½½åè‡ªåŠ¨èšç„¦åˆ°è¾“å…¥æ¡†
        window.addEventListener('load', () => {
            githubUrlInput.focus();
            
            // æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
            showResult('æ¬¢è¿ä½¿ç”¨ GitHub èµ„æºåŠ é€Ÿå·¥å…·ï¼è¯·è¾“å…¥ GitHub é“¾æ¥å¹¶ç‚¹å‡»"ç”ŸæˆåŠ é€Ÿé“¾æ¥"æŒ‰é’®ã€‚', 'success');
            setTimeout(() => {
                resultBox.style.display = 'none';
            }, 4000);
        });
    </script>
</body>
</html>